From: Guido Trotter <ultrotter@debian.org>
Date: Mon, 6 Dec 2010 16:54:43 +0100
Subject: [PATCH] Make debian mirror configurable and default to cdn

Signed-off-by: Guido Trotter <ultrotter@debian.org>
---
 templates/lxc-debian.in |    3 ++-
 1 files changed, 2 insertions(+), 1 deletions(-)

diff --git a/templates/lxc-debian.in b/templates/lxc-debian.in
index 68ba3ca..d3ce34a 100644
--- a/templates/lxc-debian.in
+++ b/templates/lxc-debian.in
@@ -21,6 +21,7 @@
 # Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111-1307 USA
 
 SUITE=${SUITE:-lenny}
+MIRROR=${MIRROR:-"http://cdn.debian.net/debian/"}
 
 configure_debian()
 {
@@ -120,7 +121,7 @@ openssh-server
     echo "Downloading debian minimal ..."
     debootstrap --verbose --variant=minbase --arch=$arch \
 	--include $packages \
-	"$SUITE" "$cache/partial-$SUITE-$arch" http://ftp.debian.org/debian
+	"$SUITE" "$cache/partial-$SUITE-$arch" $MIRROR
     if [ $? -ne 0 ]; then
 	echo "Failed to download the rootfs, aborting."
 	return 1
-- 
