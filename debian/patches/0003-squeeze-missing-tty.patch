From: Daniel Baumann <daniel.baumann@progress-technologies.net>
Date: Mon, 6 Dec 2010 16:12:36 +0100
Subject: [PATCH] squeeze-missing-tty

---
 templates/lxc-debian.in |    7 +++++++
 1 files changed, 7 insertions(+), 0 deletions(-)

diff --git a/templates/lxc-debian.in b/templates/lxc-debian.in
index 2b1b7b3..68ba3ca 100644
--- a/templates/lxc-debian.in
+++ b/templates/lxc-debian.in
@@ -27,6 +27,13 @@ configure_debian()
     rootfs=$1
     hostname=$2
 
+    # Squeeze only has /dev/tty and /dev/tty0 by default,
+    # therefore creating missing device nodes for tty1-4.
+    test -e $rootfs/dev/tty1 || mknod $rootfs/dev/tty1 c 4 1
+    test -e $rootfs/dev/tty2 || mknod $rootfs/dev/tty2 c 4 2
+    test -e $rootfs/dev/tty3 || mknod $rootfs/dev/tty3 c 4 3
+    test -e $rootfs/dev/tty4 || mknod $rootfs/dev/tty4 c 4 4
+
     # configure the inittab
     cat <<EOF > $rootfs/etc/inittab
 id:3:initdefault:
-- 
